variables:
  not_spine: includes('localhost')
  not_pod1: exclude('pod1')
  ny_pod: regex("ny\d+")

patterns:
  - name: sample node template 1
    definition: test
    node: 000c29f5d27da
    interfaces:
      - Ethernet1: any
      - Ethernet3: localhost:Ethernet1
      - Ethernet49: localhost:Ethernet49
      - Ethernet50:
          device: localhost
          port: Ethernet50


  - name: sample node template 2
    definition: leaf_template
    node: 001c73aabbcc
    interfaces:
      - Ethernet1-8: none
      - Ethernet9,10,11-13: any:Ethernet50
      - any: regex('pod\d+-spine\d+'):Ethernet1/$
      - any:
          device: regex('pod\d+-spine1')
          port: Ethernet2/3


  - name: sample global template 1
    definition: test
    variables:
      any_spine: regex('spine\d+')
      any_pod: includes('pod')
      any_pod_spine: any_spine and any_pod
      localhost: includes('localhost')
    interfaces:
      - Ethernet1: localhost:Ethernet1
      - Ethernet2: localhost:Ethernet1
      - any: regex('spine\d+'):Ethernet2
      - Ethernet49:
          device: not_spine
          port: Ethernet49
      - Ethernet50:
          device: includes('localhost')
          port: Ethernet50


  - name: sample global template 2
    definition: mlag_leaf_template
    variables:
      any_spine: includes('spine')
      not_spine: not any_spine
    interfaces:
      - Ethernet1: any_spine:Ethernet1/$
      - Ethernet2: any_spine:any
      - Ethernet3: none
      - Ethernet4: any
      - Ethernet5:
          device: includes('oob')
          port: any
      - Ethernet49: not_spine:Ethernet49
      - Ethernet50: not_spine:Ethernet50

  - name: sample global template 3
    definition: mlag_leaf_template
    variables:
      any_spine: includes('spine')
      not_spine: not any_spine
    interfaces:
      - Ethernet1-3: any_spine:Ethernet1/$
      - Ethernet5,6,7: any_spine:any
      - Ethernet49: not_spine:Ethernet49
      - Ethernet50: not_spine:Ethernet50

  - name: default catch all
    definition: test
    interfaces:
      - Ethernet1: none

